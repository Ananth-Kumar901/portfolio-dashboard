(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{6674:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var a=s(7876),r=s(4232);let l=e=>{let{data:t}=e,s=Array.from(new Set(t.map(e=>e.sector)));return(0,a.jsx)("div",{className:"space-y-12",children:s.map(e=>{let s=t.filter(t=>t.sector===e),r=s.reduce((e,t)=>e+t.investment,0),l=s.reduce((e,t)=>e+(t.presentValue||0),0),n=l-r;return(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4 text-blue-700",children:e}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-8 mb-6 text-base",children:[(0,a.jsxs)("span",{children:[(0,a.jsx)("span",{className:"font-semibold",children:"Total Investment:"})," ₹",r.toLocaleString()]}),(0,a.jsxs)("span",{children:[(0,a.jsx)("span",{className:"font-semibold",children:"Total Present Value:"})," ₹",l.toLocaleString()]}),(0,a.jsxs)("span",{className:n>=0?"text-green-600 font-semibold":"text-red-600 font-semibold",children:["Gain/Loss: ₹",n.toLocaleString()]})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full border-separate border-spacing-y-2",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-3 bg-gray-100 text-left rounded-tl-lg",children:"Stock"}),(0,a.jsx)("th",{className:"px-4 py-3 bg-gray-100 text-right",children:"Purchase Price"}),(0,a.jsx)("th",{className:"px-4 py-3 bg-gray-100 text-right",children:"Qty"}),(0,a.jsx)("th",{className:"px-4 py-3 bg-gray-100 text-right",children:"Investment"}),(0,a.jsx)("th",{className:"px-4 py-3 bg-gray-100 text-right",children:"Portfolio %"}),(0,a.jsx)("th",{className:"px-4 py-3 bg-gray-100 text-left",children:"Code"}),(0,a.jsx)("th",{className:"px-4 py-3 bg-gray-100 text-right",children:"CMP"}),(0,a.jsx)("th",{className:"px-4 py-3 bg-gray-100 text-right",children:"Present Value"}),(0,a.jsx)("th",{className:"px-4 py-3 bg-gray-100 text-right",children:"Gain/Loss"}),(0,a.jsx)("th",{className:"px-4 py-3 bg-gray-100 text-right",children:"P/E Ratio"}),(0,a.jsx)("th",{className:"px-4 py-3 bg-gray-100 text-right rounded-tr-lg",children:"Latest Earnings"})]})}),(0,a.jsx)("tbody",{children:s.map((e,t)=>(0,a.jsxs)("tr",{className:"transition-colors ".concat(t%2==0?"bg-gray-50":"bg-white"," hover:bg-blue-50"),children:[(0,a.jsx)("td",{className:"px-4 py-2 rounded-l-lg",children:e.name}),(0,a.jsxs)("td",{className:"px-4 py-2 text-right",children:["₹",e.purchasePrice]}),(0,a.jsx)("td",{className:"px-4 py-2 text-right",children:e.quantity}),(0,a.jsxs)("td",{className:"px-4 py-2 text-right",children:["₹",e.investment]}),(0,a.jsxs)("td",{className:"px-4 py-2 text-right",children:[e.portfolioPercent,"%"]}),(0,a.jsx)("td",{className:"px-4 py-2",children:e.exchangeCode}),(0,a.jsx)("td",{className:"px-4 py-2 text-right",children:null!==e.cmp&&void 0!==e.cmp?"₹".concat(e.cmp):"-"}),(0,a.jsx)("td",{className:"px-4 py-2 text-right",children:void 0!==e.presentValue?"₹".concat(e.presentValue):"-"}),(0,a.jsx)("td",{className:"px-4 py-2 text-right font-semibold ".concat(e.gainLoss>=0?"text-green-600":"text-red-600"),children:void 0!==e.gainLoss?"₹".concat(e.gainLoss):"-"}),(0,a.jsx)("td",{className:"px-4 py-2 text-right",children:null!==e.peRatio&&void 0!==e.peRatio?e.peRatio:"-"}),(0,a.jsx)("td",{className:"px-4 py-2 text-right rounded-r-lg",children:null!==e.earnings&&void 0!==e.earnings?e.earnings:"-"})]},e.name))})]})})]},e)})})};async function n(){return(await fetch("http://localhost:4000/api/portfolio")).json()}let c=()=>{let[e,t]=(0,r.useState)([]),[s,c]=(0,r.useState)(null),i=async()=>{try{let e=await n();t(e),c(null)}catch(e){c("Failed to fetch portfolio data.")}};return(0,r.useEffect)(()=>{i();let e=setInterval(i,15e3);return()=>clearInterval(e)},[]),(0,a.jsxs)("div",{className:"p-8 bg-gray-50 min-h-screen",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-8 text-gray-800",children:"Dynamic Portfolio Dashboard"}),s&&(0,a.jsx)("div",{className:"text-red-600 mb-4",children:s}),(0,a.jsx)(l,{data:e})]})}},6760:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(6674)}])}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(6760)),_N_E=e.O()}]);